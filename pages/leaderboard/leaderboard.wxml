<!--pages/leaderboard/leaderboard.wxml-->
<view class="container">
  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view 
      class="filter-item {{filter === 'likes' ? 'active' : ''}}" 
      bindtap="onFilterTap" 
      data-filter="likes"
    >
      æœ€å¤šç‚¹èµ
    </view>
    <view 
      class="filter-item {{filter === 'questions' ? 'active' : ''}}" 
      bindtap="onFilterTap" 
      data-filter="questions"
    >
      æœ€å¤šæé—®
    </view>
  </view>

  <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
  <view class="rank-list">
    <block wx:if="{{rankList.length > 0}}">
      <view 
        class="rank-item {{index < 3 ? 'top-three' : ''}}" 
        wx:for="{{rankList}}" 
        wx:key="id"
      >
        <!-- æ’å -->
        <view class="rank-num">
          <text class="num {{index < 3 ? 'top' : ''}}">{{index + 1}}</text>
        </view>
        
        <!-- ç”¨æˆ·ä¿¡æ¯ -->
        <view class="user-info" bindtap="onUserTap" data-user-id="{{item.id}}">
          <image class="avatar" src="{{item.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFit"/>
          <view class="user-detail">
            <text class="name">{{item.nickName || item.name}}</text>
            <view class="stats">
              <text class="stat-item">ğŸ‘ {{item.totalLikes || item.likes || 0}}</text>
              <text class="stat-item">â“ {{item.totalQuestions || item.questions || 0}}</text>
            </view>
          </view>
        </view>
        
        <!-- åˆ†æ•° -->
        <view class="score">
          <text class="score-num">{{item.score || item.likes || 0}}</text>
        </view>
      </view>
    </block>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{rankList.length === 0}}">
      <text class="empty-icon">ğŸ†</text>
      <text class="empty-text">æš‚æ— æ’è¡Œæ¦œæ•°æ®</text>
    </view>
  </view>

  <!-- å½“å‰ç”¨æˆ·æ’å -->
  <view class="current-user-rank" wx:if="{{currentUserRank}}">
    <text class="label">æˆ‘çš„æ’å</text>
    <view class="rank-info">
      <text class="rank-num">{{currentUserRank.rank || '--'}}</text>
      <text class="score">{{currentUserRank.score || 0}}</text>
    </view>
  </view>
</view>
